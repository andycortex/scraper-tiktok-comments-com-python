# render.yaml - Define los servicios para desplegar en Render
services:
  # Servicio Web para la API de FastAPI
  - type: web
    name: tiktok-api
    env: docker
    dockerfilePath: ./Dockerfile.api
    # Render usa el puerto expuesto en el Dockerfile (5000) y lo mapea a 80/443
    envVars:
      - key: MYSQL_HOST
        value: YOUR_EXTERNAL_MYSQL_HOST # Reemplaza esto en el panel de Render
      - key: MYSQL_PORT
        value: 3307
      - key: MYSQL_DB
        sync: false # Secreto
      - key: MYSQL_USER
        sync: false # Secreto
      - key: MYSQL_PASSWORD
        sync: false # Secreto
      - key: GEMINI_API_KEY
        sync: false # Secreto

  # Worker para el an√°lisis de comentarios en segundo plano
  - type: worker
    name: tiktok-worker
    env: docker
    dockerfilePath: ./Dockerfile.worker
    envVars:
      - key: MYSQL_HOST
        value: YOUR_EXTERNAL_MYSQL_HOST # Reemplaza esto en el panel de Render
      - key: MYSQL_PORT
        value: 3307
      - key: MYSQL_DB
        sync: false # Secreto
      - key: MYSQL_USER
        sync: false # Secreto
      - key: MYSQL_PASSWORD
        sync: false # Secreto
      - key: GEMINI_API_KEY
        sync: false # Secreto